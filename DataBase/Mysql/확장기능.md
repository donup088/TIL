## 공간검색
- 공간검색을 할 때 무조건 R-Tree 인덱스를 사용해야하는 것은 아니다. B-Tree 인덱스를 사용할 수도 있다. 위치를 기반으로 하는 검색에서는 반경을 얼마나 좁혀서 의미 있는 쿼리를 만들고 또 그만큼 빠르게 만드는 것이 중요하다.
### R-Tree 인덱스
- MBR 정보를 이용해 B-Tree 형태로 인덱스를 구축하는 것이다.
- 좌표 범위에 대해 불평등 쿼리를 효율적으로 수행 할 수 있다. ex) B-Tree를 사용하여 풀스캔을 하는 경우
- R-Tree 인덱스를 사용하려면 POINT나 GEOMETRY 타입에 위치 정보를 저장해야하고 MyISAM 스토리지 엔진을 사용하는 테이블을 생성해야한다.
- R-Tree 인덱스를 효율적으로 사용할 수 있는 함수는 Contains() 함수가 유일하다.
```
SELECT post_code, area_name
FROM tb_zip_location
WHERE
    CONTAINS(
        GEOMFROMTEXT('POLYGON((137.1616 34.9532,
                                137.2712 34.9532,
                                137.2712 35.0430,
                                137.1616 35.0430,
                                137.1616 34.9532))')
        , loc_point);
```
- CONTAINS 두번째 인자가 첫번째 인자로 전달한 공간 정보의 MBR(해당 도형을 감싸는 최소 크기 사각형)에 포함되는 지 비교하는 것이다.