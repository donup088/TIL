### OS 캐시의 활용
- 대량의 데이터를 저장하려는 테이블은 레코드가 가능한 작아지도록 컴팩트하게 설계해야한다.
- 전체 데이터량 < 물리 메모리를 유지한다. (이러한 상황이어야 전체 데이터를 캐싱할 수 있다.)

### 인덱스의 효과
- 계산량 측면에서 개선될 뿐만 아니라 디스크 접근 횟수면에서도 개선된다.
- 대규모가 되면 될수록 인덱스는 큰 효과를 가져온다.

### 복합 인덱스 사용 
```
select * from entry where url like 'http://test/%' order by timestamp
```
- url과 timestamp에 인덱스가 모두 걸려있다고 해도 한쪽의 인덱스만 사용된다.
- 양쪽 컬럼 모두 인덱스를 태우고 싶다면 (url,timestamp)를 쌍으로 복합 인덱스를 설정해야한다.

### explain 명령
- explain 명령어를 사용했을 때 extra 열에서 using where 이외에 using filesort나 using temporary와 같은 항목이 나온다면 쿼리나 인덱스를 튜닝해갈 필요가 있다.

### MySQL의 레플리케이션 기능
- 레플리케이션이란 마스터를 정하고 마스터를 뒤따르는 서버를 정해두면 마스터에 쓴 내용을 슬레이브가 폴링해서 동일한 내용으로 자신을 갱신하는 기능이다.
- select 쿼리는 슬레이브로 보내고 갱신쿼리는 마스터로 보낸다.
- 조회해오는 DB는 확장하기 쉽다. 반면 갱신/쓰기 계열을 확장하기 어렵다. -> 슬레이브쪽은 확장이 쉽지만 마스터는 어렵다. 하지만 웹 애플리케이션의 대부분은 조회가 훨씬 많기 때문에 마스터를 무조건 늘려야하는 상황은 드물다.
- 엄청난 쓰기작업이 발생하는 애플리케이션은 테이블을 분할해서 테이블 크기를 작게해준 뒤 쓰기작업을 분산시킨다. 다른방법으로는 많은 쓰기작업이 발생하는 경우 RDMS를 사용하지 않는 방법을 생각해볼 수도 있다.

### 파티셔닝에 대한 보충
- 파티셔닝이란 테이블A와 테이블 B를 서로 다른 서버에 놓아서 분산시키는 것이다.
- join 쿼리는 대상 테이블들이 하나의 서버에 있지 않다면 사용할 수 없다. 서버가 나뉜 테이블의 정보를 가져오고 싶다면 join쿼리를 분리시켜 쿼리여러개를 실행시켜야한다. 이처럼 join 쿼리를 사용한다는 것은 대상이 되는 테이블이 앞으로도 서버 분할하지 않을 것이라고 보장할 수 있을 때만 사용한다.
- 파티셔닝의 장단점
    - 장점
        - 부하가 내려가고 국소성이 늘어나서 캐시 효과가 높아진다.
    - 단점
        - 운용이 복잡해진다.
        - 고장률이 높아진다.
- 마스터 슬레이브의 다중화
    - 기본은 4대가 1세트이다. (마스터 1대 슬레이브 3대)
        - 슬레이브가 3대가 기본인 이유는 슬레이브 1대가 고장이 나면 나머지 슬레이브 1대를 멈추고 데이터를 복사하고 나머지 1대를 운영에 사용해야한다. -> 무정지 복구가능