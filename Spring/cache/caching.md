## 캐싱이란..
캐싱은 어떠한 공간에 잠시동안 저장해둔다라는 것이다. 캐싱의 장점은 통신과정이 한 단계 생략되기 때문에 고속으로 데이터를 접근할 수 있다는 장점이 있다. 캐싱을 적용하는데 주의할 점은 어떤 전략으로 어떤 데이터에 적용시킬 지가 중요하다.

캐싱은 인메모리이기 때문에 HDD 보단 수십배 빠르게 결과를 반환해준다. 따라서 캐싱을 적용한다는 것은 사용자 요청에 대한 응답을 빠르게 하기 위해서 In Memory를 중간에 두고 통신에 사용되는 cost를 줄이기는 것이다.

### Memcached vs Redis
Memcached는 스프링 자체 캐싱으로 redis와 마찬가지로 인메모리 캐시 서버이다. 
Memcached 와 Redis의 차이점을 살펴보면 Memcached는 프로세스가 죽거나 장비를 끄면 데이터들이 모두 날라가게 된다. 하지만 Redis는 메모리와 디스크에 저장되서 불의의 경우에도 데이터 복구가 가능하다. 또한 Memcached는 데이터타입으로 문자열만 지원하고 Redis는 문자열, Set,Sorted Set, Hash, List 데이터 타입을 지원한다.

Redis의 장점
1. Collection API를 제공하기 때문에 리스트, 배열과 같은 데이터 처리에 유용하다.
2. 여러 프로세스에서 동시에 같은 key 값에 대한 갱신을 요구할 경우 Atomic 처리로 데이터 부정합을 방지할 수 있는 Atomic처리 함수를 지원한다.
3. 메모리를 활용하면서 영속적인 데이터 보존이 가능하다.
4. 1개의 싱글 쓰레드로 수행되기 때문에 redis server하나에 여러개의 서버를 띄울 수 있다. 

### 캐싱 전략
1. Look Aside(Lazy Loading)
캐시를 옆에 두고 필요할 때만 데이터를 캐시에 로드하는 캐싱 전략이다. 애플리케이션에서 데이터를 가져올 때 Redis에 항상 먼저 요청하고, 데이터가 캐시에 있을 때는 Redis에서 데이터를 반환한다. Redis에 데이터가 없다면 DB에 데이터를 요청하고 이 데이터를 Redis에 저장한다.
장점
- 실제 사용되는 데이터만 캐시할 수 있다.
- redis 장애가 application 전체에 영향을 미치지 않는다.
단점
- 캐싱 되지 않은 데이터를 쿼리한다면 시간이 더 오래걸린다.
- 캐싱된 데이터가 최신 데이터라는 것을 보장하지 못한다.
- 캐시 미스에 대한 패널티가 크다.

2. Write - Through
DB에 데이터를 작성할 때마다 캐시에 데이터를 추가하거나 업데이트한다. 이로 인해 캐시 데이터는 항상 최신 상태를 유지할 수 있다. 하지만 데이터 입력시 두번의 과정을 거치기 때문에 지연 시간이 증가한다. 또한 사용되지 않을 수도 있는 데이터도 캐시에 저장하기 때문에 메모리 낭비가 발생한다. 이 때문에 TTL를 사용하여 사용되지 않는 데이터를 삭제해야한다.
장점
- 항상 데이터가 동기화 되어 있다.
단점
- 쓰지 않는 데이터도 캐시에 저장되기 때문에 리소스가 낭비된다.
- 쓰기 지연 시간이 증가한다.

### 캐시 서버 구축 Global Cache vs Local Cache
1. Local Cache
- 서버마다 캐시를 따로 저장한다.
- 로컬 서버의 리소스를 사용한다.
- 서버 내에서 작동하기 때문에 속도가 빠르다.
- 다르 서버의 캐시를 참조하기 어렵다.

2. Global Cache
- 여러 서버에서 캐시 서버를 참조한다.
- 네트워크 트래픽을 사용하기 때문에 로컬보단 느리다.
- 서버간 데이터 공유가 쉽다.
- 트래픽 분산에 용이하다.

### 캐싱 어디에 적용해야할까??
캐싱에 용이한 데이터들의 특징
- 반복적이고 동일한 결과가 나오는 기능
- 업데이트가 자주 발생하지 않는 데이터
- 자주 조회되는 데이터

참고 - https://bloowhale.tistory.com/90?category=956397