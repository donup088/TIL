## 객체 지향 설계(우아한 객체지향 정리)

### 관계의 종류 결정하기
- 연관관계 
    - 객체 참조
    - 두 객체 사이에 협력이 필요하고 관계가 영구적이라면 연관관계를 이용해 탐색 경로를 구현한다.
- 의존관계 
    - 파라미터, 리턴타입, 지역변수
- 연관관계와 의존관계를 맺을 때 항상 이유가 있어야한다.

### 패키지 의존성 사이클 해결하기
1. 중간 객체를 이용한 의존성 사이클 끊기
2. 인터페이스나 추상클래스로 의존관계를 역전시킨다.
3. 새로운 패키지 추가

### 객체 참조로 구현한 연관관계의 문제점
- 두 객체 사이의 결합도가 높아짐
- 성능 문제
    - 어디까지 조회하는 지 기준이 필요하다.
    - 트랜잭션 경합으로 인해 성능 저하
- 객체 참조를 없애는 방법
    - id를 이용해 접근
    ```
    @ManyToOne
    private Shop shop ;
    ///
    private Long shopId;
    ```
- 객체 참조를 사용하지 않는 것은 아니다.
    - 함께 생성되고 함께 삭제되는 객체들을 묶는다.
    - 도메인 제약사항을 공유하는 객체들을 함께 묶는다.
    - 가능하면 분리한다.
    - 묶인 그룹으로 트랜잭션을 관리해준다.

### Validation 로직 설게
- 객체지향 
    - 객체지향으로 여러 객체를 오가며 로직 파악
- 절차지향
    - 하나의 validation 클래스로 묶어서 관리
    - 한눈에 로직을 파악할 수 있다.
    - 클래스를 응집도 높게 변경할 수 있다.
- 때로는 절차지향이 객체지향보다 좋은 경우도 있다.

### 객체 참조를 id 탐색으로 변경 후 문제해결
- 도메인 로직의 순차적 실행
    - 절차지향 로직
        - 비즈니스 흐름이 한눈에 보인다.
        - 패키지 의존성 사이클 문제 발생
            - 인터페이스 만들고 구현체의 패키지를 옮긴다.
    - 도메인 이벤트 퍼블리싱
        - 이벤트와 이벤트핸들러로 구현

### 의존성 관리를 왜 하는가?
- 시스템을 쉽게 분리할 수 있다.
- 도메인 단위 모듈로 변경 가능
- 도메인 단위로 시스템 분리 가능